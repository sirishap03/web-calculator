import tkinter as tk

# Function to update expression in the text entry box
def press(num):
    global expression
    expression += str(num)
    equation.set(expression)

# Function to evaluate final expression
def equalpress():
    try:
        global expression
        total = str(eval(expression))  # Evaluate the expression
        equation.set(total)
        expression = total
    except:
        equation.set(" error ")  # Show error if invalid expression
        expression = ""

# Function to clear the entry
def clear():
    global expression
    expression = ""
    equation.set("")

# Main code
if __name__ == "__main__":
    gui = tk.Tk()
    gui.configure(background="light grey")
    gui.title("Simple Calculator")
    gui.geometry("300x400")

    expression = ""  # Initialize empty expression
    equation = tk.StringVar()  # StringVar to store the expression

    # Entry widget to display expression
    expression_field = tk.Entry(gui, textvariable=equation, font=("Arial", 18), bd=10, insertwidth=2, width=14, borderwidth=4)
    expression_field.grid(columnspan=4)

    # Buttons layout (text, row, column)
    buttons = [
        (7, 1, 0), (8, 1, 1), (9, 1, 2), ('/', 1, 3),
        (4, 2, 0), (5, 2, 1), (6, 2, 2), ('*', 2, 3),
        (1, 3, 0), (2, 3, 1), (3, 3, 2), ('-', 3, 3),
        (0, 4, 0), ('.', 4, 1), ('+', 4, 2), ('=', 4, 3),
        ('C', 5, 0)
    ]

    # Creating buttons dynamically
    for (text, row, col) in buttons:
        if text == '=':
            btn = tk.Button(gui, text=text, fg="white", bg="green", command=equalpress, height=2, width=7)
        elif text == 'C':
            btn = tk.Button(gui, text=text, fg="white", bg="red", command=clear, height=2, width=31)
            btn.grid(row=row, column=col, columnspan=4)  # Span across multiple columns
            continue
        else:
            btn = tk.Button(gui, text=text, fg="black", bg="white", command=lambda t=text: press(t), height=2, width=7)
        btn.grid(row=row, column=col)

    gui.mainloop()
